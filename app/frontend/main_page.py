import streamlit as st
import numpy as np
import pandas as pd
import time
import datetime

#Configure page
st.set_page_config(
        page_title="Tomsk airlines",
        page_icon="üõ´",
        layout="wide"
    )

def main():
    '''–ó–¥–µ—Å—å –∑–∞–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è, 
    –Ω–µ–±–æ–ª—å—à–∞—è –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ
    –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ª–µ—Ç–∞ –∏ –ø—Ä–∏–ª–µ—Ç–∞ –±—É–¥—É—Ç –∞–¥–µ–∫–≤–∞—Ç–Ω—ã, —Ç–æ –µ—Å—Ç—å –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è —Ç–∞–∫–æ–≥–æ,
    —á—Ç–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤—ã–±–µ—Ä–∏—Ç –¥–∞—Ç—É –ø—Ä–∏–ª–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ä–∞–Ω—å—à–µ –≤—ã–ª–µ—Ç–∞.'''

    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ —Å–µ–∫—Ü–∏–∏ –≤–∫–ª–∞–¥–æ–∫
    st.markdown("# Tomsk airlines üõ´")
    st.sidebar.markdown("# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞")

    # –ü–æ–ª—è, –¥–ª—è –≤–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –ø–æ —Ç—Ä–µ–º –∫–æ–ª–æ–Ω–∫–∞–º, 
    # —Å –Ω–µ–±–æ–ª—å—à–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –º–µ–∂–¥—É –¥—Ä—É–≥ –¥—Ä—É–≥–æ–º
    col1, col2, col3 = st.columns(3, gap="small")
    # –ü–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≥–æ—Ä–æ–¥ –≤—ã–ª–µ—Ç–∞
    with col1:
        dep_city = st.selectbox(
        '–£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –≥–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
        ('–¢–æ–º—Å–∫', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫'))

        st.write('–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è:', dep_city)
    # –í—Ç–æ—Ä–∞—è –∫–æ–ª–æ–Ω–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≥–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
    with col2:
        dest_city = st.selectbox(
            "–£–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:",
            ("–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ú–æ—Å–∫–≤–∞", "–•–∞–±–∞—Ä–æ–≤—Å–∫", 
            "–ò—Ä–∫—É—Ç—Å–∫", "–ë–ª–∞–≥–æ–≤–µ—â–µ–Ω—Å–∫", "–ù–µ—Ä—é–Ω–≥—Ä–∏", "–ú–∏—Ä–Ω—ã–π",
            "–Æ–∂–Ω–æ-–°–∞—Ö–∞–ª–∏–Ω—Å–∫", "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π")
        )
        st.write('–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è:', dest_city)

    
    # –ú–∞—Å—Å–∏–≤ c –¥–∞—Ç–æ–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –¥–∞—Ç–æ–π –≤—ã–ª–µ—Ç–∞ –æ–±—Ä–∞—Ç–Ω–æ
    dates = []

    with col3:
        
        sub_col1, sub_col2 = st.columns(2, gap="small")
        
        with sub_col1:
            departure_d = st.date_input("–î–∞—Ç–∞ –≤—ã–ª–µ—Ç–∞:", value=None, format="DD.MM.YYYY")
            dates.append(departure_d)
        
        with sub_col2:
            arrival_d = st.date_input("–î–∞—Ç–∞ –ø—Ä–∏–ª–µ—Ç–∞:",value=None, min_value=departure_d, format="DD.MM.YYYY")
            dates.append(arrival_d)

            # –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É, –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥ button_click,
            # –û—Ç–∫—É–¥–∞ –æ–Ω–∏ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—É–¥–∞ –Ω–∞–¥–æ
            if st.button("–ù–∞–π—Ç–∏"):
                with col1:
                    button_click(dep_city, dest_city, dates)

    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏
    display_charts()


def display_charts():
    '''–§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–≤—É—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤.
       –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, 
       —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–µ–π –∏ –∫–Ω–æ–ø–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö, –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. '''
    
    with st.container():
        st.write("–ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –Ω–∞ –∞–≤–∏–∞–±–∏–ª–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∞–≤–∏–∞–∫–æ–º–ø–∞–Ω–∏–∏")
        chart_data = pd.DataFrame(
            np.random.randn(20, 2),
            columns=['S7', '–ê—ç—Ä–æ—Ñ–ª–æ—Ç'])  
        
        st.line_chart(chart_data)

    with st.container():
        chart_data = pd.DataFrame(np.random.randn(20, 2), columns=["s7", "–ê—ç—Ä–æ—Ñ–ª–æ—Ç"])

        st.bar_chart(chart_data)

def button_click(city1, city2, dates):
    '''–ö–Ω–æ–ø–∫–∞ –Ω—É–∂–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é 
    –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ª–µ—Ç–∞/–ø—Ä–∏–ª–µ—Ç–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.'''
    if (dates[0] != None and dates[1] != None):
        st.write(city1, city2, *dates)


if __name__ == "__main__":
    '''–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã'''
    main()